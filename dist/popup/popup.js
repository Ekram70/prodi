import{c as p,j as e,r as o,C as l,S as j,B as S}from"../assets/switch.js";import{s as h}from"../assets/storage.js";const f=()=>{const[i,u]=o.useState(""),[r,d]=o.useState({}),[a,c]=o.useState({enabled:!1,startTime:"23:00",endTime:"06:00"});o.useEffect(()=>{chrome.tabs.query({active:!0,currentWindow:!0},async t=>{const s=t[0];if(s.url){const g=new URL(s.url).hostname;u(g)}}),(async()=>{const t=await h.getSettings();d(t.usageStats),c(t.bedtime)})(),chrome.storage.onChanged.addListener(t=>{if(t.settings){const s=t.settings.newValue;d(s.usageStats),c(s.bedtime)}})},[]);const x=async()=>{const n={...a,enabled:!a.enabled};await h.saveBedtimeSettings(n),c(n)},m=n=>{const t=Math.floor(n/60),s=Math.round(n%60);return`${t}h ${s}m`};return e.jsxs("div",{className:"w-80 p-4 space-y-4",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Prodi"}),i&&r[i]&&e.jsxs(l,{className:"p-4",children:[e.jsx("h2",{className:"font-semibold mb-2",children:"Current Site"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{children:["Today: ",m(r[i].timeSpentToday)]}),e.jsxs("p",{children:["This Month:"," ",m(r[i].timeSpentThisMonth)]})]})]}),e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold",children:"Bedtime Mode"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.startTime," - ",a.endTime]})]}),e.jsx(j,{checked:a.enabled,onCheckedChange:x})]})}),e.jsx(S,{className:"w-full",onClick:()=>chrome.runtime.openOptionsPage(),children:"Open Settings"})]})},b=p.createRoot(document.getElementById("root"));b.render(e.jsx(f,{}));
