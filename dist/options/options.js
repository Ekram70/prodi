import{r as n,j as e,a as b,P,c as k,C as j,S as E,B as y}from"../assets/switch.js";import{s as m}from"../assets/storage.js";const d=n.forwardRef(({className:a,type:r,...s},c)=>e.jsx("input",{type:r,className:b("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...s}));d.displayName="Input";var R="Label",N=n.forwardRef((a,r)=>e.jsx(P.label,{...a,ref:r,onMouseDown:s=>{var o;s.target.closest("button, input, select, textarea")||((o=a.onMouseDown)==null||o.call(a,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));N.displayName=R;var w=N;const l=n.forwardRef(({className:a,...r},s)=>e.jsx(w,{ref:s,className:b("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r}));l.displayName=w.displayName;const I=()=>{const[a,r]=n.useState([]),[s,c]=n.useState({enabled:!1,startTime:"23:00",endTime:"06:00"}),[o,S]=n.useState({}),[h,f]=n.useState(""),[p,T]=n.useState(30),[v,L]=n.useState(300);n.useEffect(()=>{M()},[]);const M=async()=>{const t=await m.getSettings();r(t.timeLimits),c(t.bedtime),S(t.usageStats)},C=async()=>{if(!h)return;const t={domain:h,minutesPerDay:p,minutesPerMonth:v,isBlocked:!1};await m.saveTimeLimit(t),r([...a,t]),f("")},D=async t=>{const i=a.filter(B=>B.domain!==t),x=await m.getSettings();x.timeLimits=i,await m.saveSettings(x),r(i)},g=async t=>{const i={...s,...t};await m.saveBedtimeSettings(i),c(i)},u=t=>{const i=Math.floor(t/60),x=Math.round(t%60);return`${i}h ${x}m`};return e.jsxs("div",{className:"max-w-2xl mx-auto p-8 space-y-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Prodi Settings"}),e.jsxs(j,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Bedtime Mode"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{checked:s.enabled,onCheckedChange:t=>g({enabled:t})}),e.jsx(l,{children:"Enable Bedtime Mode"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(l,{children:"Start Time"}),e.jsx("div",{className:"relative cursor-pointer",onClick:t=>{const i=t.currentTarget.querySelector("input");i&&i.showPicker()},children:e.jsx(d,{type:"time",value:s.startTime,onChange:t=>g({startTime:t.target.value}),className:"w-full"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(l,{children:"End Time"}),e.jsx("div",{className:"relative cursor-pointer",onClick:t=>{const i=t.currentTarget.querySelector("input");i&&i.showPicker()},children:e.jsx(d,{type:"time",value:s.endTime,onChange:t=>g({endTime:t.target.value}),className:"w-full"})})]})]})]})]}),e.jsxs(j,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Time Limits"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Domain (e.g., youtube.com)"}),e.jsx(d,{value:h,onChange:t=>f(t.target.value),placeholder:"Enter domain"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{children:"Daily Limit (minutes)"}),e.jsx(d,{type:"number",value:p,onChange:t=>T(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx(l,{children:"Monthly Limit (minutes)"}),e.jsx(d,{type:"number",value:v,onChange:t=>L(Number(t.target.value))})]})]}),e.jsx(y,{onClick:C,children:"Add Time Limit"})]}),e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.domain}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Daily: ",u(t.minutesPerDay)," | Monthly:"," ",u(t.minutesPerMonth)]}),o[t.domain]&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Today:"," ",u(o[t.domain].timeSpentToday)," | This Month:"," ",u(o[t.domain].timeSpentThisMonth)]})]}),e.jsx(y,{variant:"destructive",size:"sm",onClick:()=>D(t.domain),children:"Remove"})]})},t.domain))})]})]})},$=k.createRoot(document.getElementById("root"));$.render(e.jsx(I,{}));
