import{r as i,j as e,a as y,P as E,c as P,C as j,S as R,B as v}from"../assets/switch.js";import{s as c}from"../assets/storage.js";const l=i.forwardRef(({className:a,type:n,...s},m)=>e.jsx("input",{type:n,className:y("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:m,...s}));l.displayName="Input";var k="Label",N=i.forwardRef((a,n)=>e.jsx(E.label,{...a,ref:n,onMouseDown:s=>{var o;s.target.closest("button, input, select, textarea")||((o=a.onMouseDown)==null||o.call(a,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));N.displayName=k;var w=N;const r=i.forwardRef(({className:a,...n},s)=>e.jsx(w,{ref:s,className:y("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n}));r.displayName=w.displayName;const I=()=>{const[a,n]=i.useState([]),[s,m]=i.useState({enabled:!1,startTime:"23:00",endTime:"06:00"}),[o,L]=i.useState({}),[h,f]=i.useState(""),[p,S]=i.useState(30),[b,T]=i.useState(300);i.useEffect(()=>{M()},[]);const M=async()=>{const t=await c.getSettings();n(t.timeLimits),m(t.bedtime),L(t.usageStats)},D=async()=>{if(!h)return;const t={domain:h,minutesPerDay:p,minutesPerMonth:b,isBlocked:!1};await c.saveTimeLimit(t),n([...a,t]),f("")},C=async t=>{const d=a.filter(B=>B.domain!==t),x=await c.getSettings();x.timeLimits=d,await c.saveSettings(x),n(d)},g=async t=>{const d={...s,...t};await c.saveBedtimeSettings(d),m(d)},u=t=>{const d=Math.floor(t/60),x=Math.round(t%60);return`${d}h ${x}m`};return e.jsxs("div",{className:"max-w-2xl mx-auto p-8 space-y-8",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Prodi Settings"}),e.jsxs(j,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Bedtime Mode"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{checked:s.enabled,onCheckedChange:t=>g({enabled:t})}),e.jsx(r,{children:"Enable Bedtime Mode"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Start Time"}),e.jsx(l,{type:"time",value:s.startTime,onChange:t=>g({startTime:t.target.value})})]}),e.jsxs("div",{children:[e.jsx(r,{children:"End Time"}),e.jsx(l,{type:"time",value:s.endTime,onChange:t=>g({endTime:t.target.value})})]})]})]})]}),e.jsxs(j,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Time Limits"}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Domain (e.g., youtube.com)"}),e.jsx(l,{value:h,onChange:t=>f(t.target.value),placeholder:"Enter domain"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(r,{children:"Daily Limit (minutes)"}),e.jsx(l,{type:"number",value:p,onChange:t=>S(Number(t.target.value))})]}),e.jsxs("div",{children:[e.jsx(r,{children:"Monthly Limit (minutes)"}),e.jsx(l,{type:"number",value:b,onChange:t=>T(Number(t.target.value))})]})]}),e.jsx(v,{onClick:D,children:"Add Time Limit"})]}),e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:t.domain}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Daily: ",u(t.minutesPerDay)," | Monthly:"," ",u(t.minutesPerMonth)]}),o[t.domain]&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Today:"," ",u(o[t.domain].timeSpentToday)," | This Month:"," ",u(o[t.domain].timeSpentThisMonth)]})]}),e.jsx(v,{variant:"destructive",size:"sm",onClick:()=>C(t.domain),children:"Remove"})]})},t.domain))})]})]})},$=P.createRoot(document.getElementById("root"));$.render(e.jsx(I,{}));
